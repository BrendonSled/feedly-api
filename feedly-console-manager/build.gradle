apply plugin: 'application'
apply plugin: 'fatjar'

buildscript {
    repositories { mavenCentral() }
    dependencies { classpath 'eu.appsatori:gradle-fatjar-plugin:0.2-rc1' }
}


dependencies {
    //feedly-api
    compile project(':feedly-api')

    //google dependencies
    compile "com.google.oauth-client:google-oauth-client-jetty:$versionGoogleClient"
    compile "com.google.http-client:google-http-client-gson:$versionGoogleClient"
}

mainClassName = 'org.github.bademux.feedly.conman.FeedlyConMan'

jar{
    manifest.attributes("Main-Class": project.mainClassName)
    //prevent dublication for 'workaround for "resources not found"'
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

fatJar{
    destinationDir = file("${buildDir}/fatJar")
    manifest.attributes("Main-Class": project.mainClassName)
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

run{
    standardInput = System.in
    standardOutput = System.out
    errorOutput = System.err
}

//temporary workaround for "resources not found"
sourceSets.main.output.resourcesDir = sourceSets.main.output.classesDir